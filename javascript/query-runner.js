//************************************************************************
//************************************************************************
// JQuery Initializer
//************************************************************************
//************************************************************************
$(document).ready(function()
{

    editor = ace.edit("editor");
    textarea = $('textarea[name="query"]').hide();

    editor.setTheme("ace/theme/clouds");
    editor.getSession().setMode("ace/mode/sql");

	//====================================================================
	// New query Submit
	//====================================================================
	$('.query-runner').submit(function() {
		textarea.val(editor.getSession().getValue());
	});

	//====================================================================
	// Use Previous Query
	//====================================================================
	$('#prev-queries pre').dblclick(function() {
		editor.getSession().setValue($(this).text());
	});

	//====================================================================
	// Detect Window Resize
	//====================================================================
	$( window ).resize(function() {
		var cw_width = $('#content-wrapper').width();
		var win_width = $(window).width();

		if (win_width > 768) {
			var editor_width = cw_width - 120;
		}
		else if (win_width > 1199) {
			var editor_width = cw_width - 160;
		}
		else {
			var editor_width = cw_width - 100;
		}
		
		$('#editor').width(editor_width);
	});
	$(window).resize();
});

//************************************************************************
//************************************************************************
// Functions
//************************************************************************
//************************************************************************

