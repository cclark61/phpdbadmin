//************************************************************************
//************************************************************************
// JQuery Initializer
//************************************************************************
//************************************************************************
$(document).ready(function()
{

	submit_button = false;

	//====================================================================
	//====================================================================
	// Keep track of the submit button
	//====================================================================
	//====================================================================
	$('button').click(function() {
		submit_button = $(this);
	});

	//====================================================================
	//====================================================================
	// Set Replace Form Submit Event
	//====================================================================
	//====================================================================
	$('#frm-replace').submit(function() {
		var btn_value = submit_button.val();
		//alert(btn_value);

		//----------------------------------------------------------------
		//----------------------------------------------------------------
		// Cancel Button
		//----------------------------------------------------------------
		//----------------------------------------------------------------
		if (btn_value == 'Cancel') { return true; }

		//----------------------------------------------------------------
		//----------------------------------------------------------------
		// Replace Button
		//----------------------------------------------------------------
		//----------------------------------------------------------------

		//---------------------------------------------------------
		// Confirmation Checkboxes Checked?
		//---------------------------------------------------------
		var confirm1 = $('input[name="confirm"]').prop('checked');
		var confirm2 = $('input[name="confirm2"]').prop('checked');
		
		//---------------------------------------------------------
		// Create JSON Object of Selected Table-Column Pairs
		//---------------------------------------------------------
		var selected_tbl_cols = {};
		var num_selected_tbl_cols = 0;
		$('.matched-column:checked').each(function() {
			var tmp_val = $(this).attr('data-tbl-col');
			selected_tbl_cols[tmp_val] = tmp_val;
			num_selected_tbl_cols++;
		});
		var selected_tbl_cols_enc = JSON.stringify(selected_tbl_cols);
		$('input[name="selected_replace"]').val(selected_tbl_cols_enc);

		//---------------------------------------------------------
		// Check Replace Value
		//---------------------------------------------------------
		var replace_value = $('input[name="replace_value"]').val();
		replace_value = replace_value.trim();

		//---------------------------------------------------------
		// Check Validations
		//---------------------------------------------------------
		if (num_selected_tbl_cols && replace_value != '' && confirm1 && confirm2) {
			$('#frm-replace .validation-messages').hide();
			return true;
		}
		else {
			$('#frm-replace .validation-messages').show();
		}

		return false;
	});

});

//************************************************************************
//************************************************************************
// Functions
//************************************************************************
//************************************************************************

